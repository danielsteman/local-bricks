# The main job for credit_risk_model
resources:
  jobs:
    serverless:
      name: serverless

      schedule:
        quartz_cron_expression: "0 30 8,12 ? * MON-FRI"
        timezone_id: Europe/Amsterdam
        pause_status: "PAUSED"

      tags:
        hr_frequency: twice_per_day
        type: analytical-product

      email_notifications:
        on_failure:
          - daniel.steman@bridgefund.nl
          - joseph.marcus@bridgefund.nl

      # tasks:
      #   - task_key: example
      #     job_cluster_key: job_cluster_feature_extraction
      #     notebook_task:
      #       notebook_path: ../src/main.py
      #       base_parameters:
      #         commit_hash: ${var.commit_hash}

      job_clusters:
        - job_cluster_key: job_cluster
          new_cluster:
            spark_version: 13.3.x-scala2.12
            node_type_id: m5d.2xlarge
            autoscale:
              min_workers: 1
              max_workers: 5

      max_retries: 3
